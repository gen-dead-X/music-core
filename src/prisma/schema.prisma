generator client {
    provider = "prisma-client-js"
}

datasource db {
    provider = "postgresql"
    url      = env("DATABASE_URL")
}

enum UserType {
    user
    admin
    artist
    staff
}

model User {
    id          String   @id @default(uuid())
    email       String   @unique
    name        String
    phoneNumber String   @unique
    userType    UserType @default(user)
    username    String?
    age         Int?
    gender      String?
    password    String
    Profile     Profile?
    Track       Track[]
    Album       Album[]
}

model Profile {
    id               String  @id @default(uuid())
    bio              String?
    user             User    @relation(fields: [userId], references: [id])
    userId           String  @unique
    profileImage     String
    profileImageName String
    thumbnail        String
    thumbnailName    String
    private          Boolean @default(false)
}

enum TRACK_PRIVACY {
    private
    restricted
    public
}

model Track {
    id               String        @id @default(uuid())
    title            String
    audioFile        String
    artist           String
    uploader         User          @relation(fields: [userId], references: [id])
    userId           String
    album            Album         @relation(fields: [albumId], references: [id])
    albumId          String
    genre            String
    release          DateTime
    albumArtWork     String?
    albumArtWorkName String?
    description      String?
    tags             String[]
    privacy          TRACK_PRIVACY @default(public)
}

model Album {
    id      String  @id @default(uuid())
    Track   Track[]
    name    String
    uploade User    @relation(fields: [userId], references: [id])
    userId  String
}
